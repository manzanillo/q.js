<!DOCTYPE html>
<html>
	<head>
        <title>Q ⟩ Curriculum 01</title>
        <meta charset="utf-8">
        <meta name="viewport"             content="width=device-width,initial-scale=1.0">
        <meta name="description"          content="Quantum computing in your browser.">
        <meta name="copyright"            content="Stewart Smith 2019–2020">
        <meta name="keywords"             content="
            Q, Q.js, Q-js, Qjs, quantum JavaScript,
            quantum, quantum physics, quantum mechanics, superposition,
            quantum computer, quantum computer programming, quantum computing, QC, 
            quantum simulator, quantum computer simulator, 
            qubit, qbit, gate, Hadamard, Bloch, Bloch Sphere,
            Web, Web site, website, Web browser, browser, HTML, HTML5, JavaScript, ES6, CSS,
            Chrome, Firefox, Safari, Opera, Brave, Edge, WebKit, Blink, Gecko, Mozilla,
            Stewart Smith, Stewart, Stew, Stuart, Steven, Steve, Stewdio, stewartsmith, stew_rtsmith, @stew_rtsmith,
            Moar, Moar Technologies Corp, MTC,
            Google, IBM, Microsoft, Amazon, NASA, DWave, D-Wave,
            Quil, OpenQASM,
                ProjectQ, Qiskit, 
                Quantum Development Kit, Cirq, Strawberry Fields, t|ket>,
                QCL, Quantum pseudocode, Q#, Q|SI>, Q language, qGCL, QFC, QML, LIQUi|>, Quipper,
            Stanford CS 269 Q: Quantum Computer Programming">
        
        <meta name="twitter:card"         content="summary_large_image">
        <meta name="twitter:site"         content="@stew_rtsmith">
        <meta name="twitter:creator"      content="@stew_rtsmith">
        <meta name="twitter:title"        content="Q ⟩ Curriculum 01">
        <meta name="twitter:description"  content="Quantum computing in your browser.">
        <meta name="twitter:image"        content="https://quantumjavascript.app/assets/Q-website-preview.jpg">
        
        <meta property="og:type"          content="website">
        <meta property="og:title"         content="Q ⟩ Curriculum 01">
        <meta property="og:description"   content="Quantum computing in your browser.">
        <meta property="og:image"         content="https://quantumjavascript.app/assets/Q-website-preview.jpg">
        <meta property="og:url"           content="https://quantumjavascript.app/Circuit.html">
        
        <link rel="canonical" href="https://quantumjavascript.app/Circuit.html">
        <link href="assets/Q-favicon-064.png" rel="icon" type="image/png">
        <link href="assets/Q-favicon-144.png" rel="apple-touch-icon">
        
        <link rel="stylesheet" href="Q/Q.css">
        <link rel="stylesheet" href="Q/Q-Circuit-Editor.css">
        <link rel="stylesheet" href="assets/documentation.css">
        <link rel="stylesheet" href="curriculum/curriculum.css">


        <script src="Q/Q.js"></script>
        <script src="Q/Q-ComplexNumber.js"></script>
        <script src="Q/Q-Matrix.js"></script>
        <script src="Q/Q-Qubit.js"></script>
        <script src="Q/Q-Gate.js"></script>
        <script src="Q/Q-History.js"></script>
        <script src="Q/Q-Circuit.js"></script>
        <script src="Q/Q-Circuit-Editor.js"></script>
        <script src="assets/navigation.js"></script>

        <script src="curriculum/Q-Curriculum-helper.js"></script>
        
    </head>
    <body>
		<main class="home">
            <h1>Exercise 01</h1>
            <p>
                Verändere die Eingabewerte, indem Du auf die Zahlen am Anfang einer Zeile klickst
                und miss die Ergebnisse, indem Du auf "Auswerten" klickst
            </p>
            <div id=exercise01></div>
            <button class="Q-button" 
                    id="evaluate-button" 
                    type="button" 
                    onclick="auswerten()">
                Auswerten
            </button>

            <h2>
                Measurement history
            </h2>
            <div id="measurement-history" class="measurement-history-container">
                <button class="measurement-history-action-button" onclick="resetHistory()">Reset</button>
            </div>

            <p>

            </p>

            <!-- Curriculum navigation -->
            <footer class="curriculum-footer">
                <button class="Q-button" 
                    type="button" 
                    disabled>
                    Zurück
                </button>
                <a class="Q-button" 
                    type="button" 
                    href="curriculum02.html">
                    Weiter
            </a>
            </footer>
        </main>
    </body>

    <script>

        let exercise1 = Q`
        
        H-I-X
        I-I-X
        `
        document.getElementById("exercise01").appendChild( exercise1.toDom() )

        let evaluationHistory = []

        function resetHistory(){
            evaluationHistory = []
            let historyEls = document.getElementsByClassName('measurement-history-container-element')
            Array.from(historyEls).map(el => el.parentNode.removeChild(el))
        }

        function auswerten(){
            // try evaluates the circuit onces and returns the index of the result
            let result = exercise1.try$().toString(2).padStart(exercise1.bandwidth, "0")
            
            // add result to evaluation history
            evaluationHistory.push(result)
            let historyEl = document.createElement('div')
            historyEl.classList.add('measurement-history-container-element')
            historyEl.innerText = result
            document.getElementById('measurement-history').prepend(historyEl)

            for (let idx = 0; idx < '0' + result.length; idx++){
                // if there is already a measurement taken, remove it
                if (document.getElementById('measurement-' + idx)){
                    let oldMeasureEl = document.getElementById('measurement-' + idx)
                    oldMeasureEl.parentNode.removeChild(oldMeasureEl)
                }

                let measureEl = document.createElement('div')
                document.getElementsByClassName("Q-circuit-board-foreground")[0].appendChild(measureEl)
                measureEl.classList.add('circuit-measurement')
                measureEl.id = "measurement-" + idx
                measureEl.style.setProperty('grid-column-start', 6)
                measureEl.style.setProperty('grid-row-start', idx+2)
                measureEl.innerHTML = 
                    `<div class="circuit-measurement-tile">${result[idx]}</div>`
            }
        }


//  Update evaluation result, when circuit is altered via GUI
window.addEventListener( 'Q gui altered circuit', function( event ){
    for (let idx = 0; idx < '0' + event.detail.circuit.bandwidth; idx++){
        // if there is already a measurement taken, remove it
        if (document.getElementById('measurement-' + idx)){
            let oldMeasureEl = document.getElementById('measurement-' + idx)
            oldMeasureEl.parentNode.removeChild(oldMeasureEl)
        }
    }
    event.detail.circuit.evaluate$()
})

    </script>
</html>